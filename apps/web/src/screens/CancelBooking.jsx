import React,{useEffect,useState} from 'react';import { API_BASE } from '../config';import { ArrowLeft } from '../components/Icons'
export function CancelBooking({bookingId,onBack}){const [quote,setQuote]=useState(null);useEffect(()=>{fetch(`${API_BASE}/bookings/${bookingId}/cancel/quote`).then(r=>r.json()).then(setQuote)},[bookingId]);async function doCancel(){await fetch(`${API_BASE}/bookings/${bookingId}/cancel`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({actor:'OWNER'})});onBack&&onBack()}if(!quote)return <div className='p-5 bg-white rounded shadow-card'>Loading…</div>;return(<div className='mt-6 space-y-4'><button className='flex items-center gap-2 px-3 py-2 bg-slate-200 hover:bg-slate-300 rounded transition-colors' onClick={onBack}><ArrowLeft className='w-4 h-4'/><span>Back</span></button><div className='p-5 bg-white rounded shadow-card'><h2 className='text-xl font-semibold mb-2'>Cancel booking</h2><p className='text-slate-700 mb-2'>If you cancel now, a forfeit of <b>£{(quote.forfeitCents/100).toFixed(2)}</b> will apply (policy v{quote.policyVersion}).</p><button className='px-4 py-2 bg-rose-600 text-white rounded' onClick={doCancel}>Confirm cancellation</button></div></div>)}
