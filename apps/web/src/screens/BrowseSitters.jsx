import React,{useEffect,useState} from 'react';import { API_BASE } from '../config'
export function BrowseSitters({onBack}){const [tier,setTier]=useState('TRAINEE');const [list,setList]=useState(null);async function load(){setList(null);const j=await (await fetch(`${API_BASE}/sitters/search?tier=${tier}&postcode=HP20`)).json();setList(j.results||[])}useEffect(()=>{load()},[tier]);return(<div className='mt-6'><button className='px-3 py-1 bg-slate-200 rounded' onClick={onBack}>← Back</button><div className='p-5 bg-white rounded shadow-card mt-3'><h2 className='text-xl font-semibold mb-2'>Browse sitters</h2><div className='flex items-center gap-2 mb-4'><span>Tier:</span><select className='border rounded px-2 py-1' value={tier} onChange={e=>setTier(e.target.value)}><option>TRAINEE</option><option>VERIFIED</option><option>PRO</option></select></div>{!list?(<div className='grid md:grid-cols-2 gap-3'><div className='animate-pulse bg-slate-200 h-24 rounded'></div><div className='animate-pulse bg-slate-200 h-24 rounded'></div></div>):(<div className='grid md:grid-cols-2 gap-3'>{list.map(s=>(<div key={s.id} className='border rounded-lg p-3 shadow-sm bg-white slide-up'><div className='flex justify-between'><div><div className='font-semibold'>{s.name} <span className='ml-2 text-xs px-2 py-0.5 rounded bg-slate-100'>{s.tier}</span></div><div className='text-slate-600 text-sm'>{s.rating}★ ({s.reviews}) • {s.postcode}</div></div><div className='text-right'><div className='font-semibold'>£{(s.ratePerDay/100).toFixed(0)}/day</div><button className='mt-1 px-3 py-1 bg-sky-600 text-white rounded text-sm' onClick={()=>onBack()}>Book</button></div></div></div>))}</div>)}</div></div>)}
