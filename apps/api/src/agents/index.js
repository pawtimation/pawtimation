import { runDailyDigest } from './digest.js';import { getAgentFlags } from './controller.js';import { checkPendingRewards } from './rewardNotifier.js';let timers=[];export function startAgents(){stopAgents();const {digest}=getAgentFlags();if(digest){const every=Number(process.env.DIGEST_INTERVAL_MS||60000);timers.push(setInterval(()=>runDailyDigest().catch(console.error),every))}timers.push(setInterval(()=>checkPendingRewards().catch(console.error),60*60*1000));checkPendingRewards();console.log('[agents] running',getAgentFlags(),'+ reward notifier (1h)')}export function stopAgents(){timers.forEach(clearInterval);timers=[]}
