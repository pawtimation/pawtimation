Media & Walk Gallery System‚Äù

(No code ‚Äî instructions only. Fully compatible with existing architecture.)

üîí NON-NEGOTIABLE RULES

Do NOT change any existing booking, calendar, messaging, or CRM logic.
Do NOT modify database tables that already exist.
This patch is additive only.

‚∏ª

A. New Storage Requirement ‚Äì Media Files

All images & short videos must be stored in a single unified system:

Create storage bucket:
	‚Ä¢	media/
With folders:
	‚Ä¢	media/staff/
	‚Ä¢	media/clients/
	‚Ä¢	media/dogs/
	‚Ä¢	media/bookings/

Allowed file types:
	‚Ä¢	Images: JPG, PNG, WEBP
	‚Ä¢	Videos: MP4, MOV (max 10‚Äì15 seconds)

All files must store:
	‚Ä¢	URL
	‚Ä¢	businessId
	‚Ä¢	uploadedBy (userId)
	‚Ä¢	role (ADMIN/STAFF/CLIENT)
	‚Ä¢	createdAt

‚∏ª

B. Staff Profile Photos

Staff Portal ‚Äî Settings Page

Add:
	‚Ä¢	‚ÄúUpload Profile Photo‚Äù
	‚Ä¢	Supports smartphone camera or file upload
	‚Ä¢	Should show circular preview (like a social media avatar)

Admin Portal ‚Äî Staff List

Next to each staff member:
	‚Ä¢	Display small circular thumbnail (32‚Äì40px)
	‚Ä¢	Clicking shows full photo

‚∏ª

C. Client & Dog Photos

Admin Portal ‚Äî Clients ‚Üí Dog Profile

Add fields:
	‚Ä¢	‚ÄúAdd Dog Photo‚Äù
	‚Ä¢	Single photo per dog for now
	‚Ä¢	Optional gallery phase 2

Where it appears:
	‚Ä¢	On dog profile card
	‚Ä¢	On booking confirmation modals
	‚Ä¢	On messaging thread (small avatar next to dog name)
	‚Ä¢	Optionally (if trivial) small 24px dog icon on calendar tiles
	‚Ä¢	Only if performance impact is zero
	‚Ä¢	If not, skip this part for now

‚∏ª

D. Walk Photos & Video Capture

Staff Portal ‚Äî Active Job Page

Add a new section:

‚ÄúWalk Gallery‚Äù
	‚Ä¢	Button: ‚ÄúAdd Photo/Video‚Äù
	‚Ä¢	Opens native phone camera
	‚Ä¢	Supports multiple uploads
	‚Ä¢	Photos upload instantly and attach to the booking

Behaviour:
	‚Ä¢	Staff can upload any time from job start ‚Üí job complete
	‚Ä¢	Admin can view all uploads
	‚Ä¢	Clients see them instantly in their client portal

‚∏ª

E. Booking-Level Media Timeline

Booking Details Page (Admin, Staff, Client)

Add a new tab/section:

‚ÄúWalk Media‚Äù
Contains:
	‚Ä¢	Grid of photos
	‚Ä¢	Short video clips (with play icon)
	‚Ä¢	Timestamps
	‚Ä¢	Who uploaded them (staff name + avatar)

Important:

DO NOT mix media with messaging.
Media should have its own dedicated UI.

‚∏ª

F. Premium Feel Enhancements (UX Only)

Make media behave like a proper gallery:
	‚Ä¢	Tap/click ‚Üí full screen lightbox
	‚Ä¢	Swipe left/right on mobile
	‚Ä¢	Video auto-plays muted on open
	‚Ä¢	Clean spacing, rounded corners

Optional visual touches (safe & simple):
	‚Ä¢	When multiple dogs ‚Üí show small stacked avatars above the gallery
	‚Ä¢	When no photos yet ‚Üí show empty state:
‚ÄúNo walk photos yet ‚Äî your walker can add some during this job.‚Äù

‚∏ª

G. Permissions

Admin:
	‚Ä¢	Can upload/edit/delete all media
	‚Ä¢	Can view all dog/staff/client photos

Staff:
	‚Ä¢	Can upload during active jobs
	‚Ä¢	Cannot delete client/dog photos
	‚Ä¢	Cannot modify business-level media

Client:
	‚Ä¢	Can upload dog photo (profile only)
	‚Ä¢	Can view media attached to their own bookings
	‚Ä¢	Cannot delete walk media

‚∏ª

H. API & Backend Rules (No Code)

These are behavioural rules for dev:
	1.	All media must reference:
	‚Ä¢	bookingId (if applicable)
	‚Ä¢	dogId (if applicable)
	‚Ä¢	userId
	‚Ä¢	businessId
	2.	File validation:
	‚Ä¢	Max file size: 10 MB per file
	‚Ä¢	Max number of media items per booking: 20
	‚Ä¢	Videos auto-compressed by frontend if needed
	3.	Security:
	‚Ä¢	Only users in the same business can view media
	‚Ä¢	URLs must be signed/secured (no public buckets)

‚∏ª

I. Future Phase (NOT PART OF THIS PATCH)

(Do not implement now.)
	‚Ä¢	AI tagging
	‚Ä¢	Automatic dog recognition
	‚Ä¢	Auto-route GIF exports
	‚Ä¢	Social share templates
	‚Ä¢	Story-style view for clients

‚∏ª

J. Acceptance Criteria (Copy This to Replit)

A feature is ‚Äúdone‚Äù when:
	1.	Staff can upload a headshot.
	2.	Admin can upload a dog photo.
	3.	Staff can take photos/videos during walks.
	4.	All media attaches to the correct booking.
	5.	Admin / Staff / Client can view media in a clean gallery.
	6.	No media is visible across different businesses.
	7.	Optional dog avatars on calendar only if performance is stable.