DYNAMIC WALKING ROUTE GENERATION (NEW SYSTEM)

Feature Summary

Generate a dog-walking route based on:
	â€¢	Clientâ€™s geocoded home address
	â€¢	Service duration (30 / 60 / 90 min)
	â€¢	Using an external routing API (Mapbox or OpenRouteService)

Store final result in booking:

booking.route = {
  geojson,
  distanceMeters,
  durationMinutes,
  generatedAt
}


â¸»

â— UI Placement Requirements (All Platforms)

â¸»

ğŸ–¥ï¸ Admin Web â€” BookingFormModal

Place directly under Service + Start Time:

WALKING ROUTE BLOCK
	â€¢	Generate Suggested Route button
	â€¢	Static map preview
	â€¢	Text summary:
	â€¢	Distance
	â€¢	Estimated duration
	â€¢	Last generated time
	â€¢	Hidden until:
	â€¢	Booking saved
	â€¢	Client has usable address coords

â¸»

ğŸ“± Admin Mobile â€” Job Detail

Under service/time fields:

WALKING ROUTE BLOCK
	â€¢	â€œGenerate Routeâ€ button
	â€¢	Static map
	â€¢	Distance + duration

â¸»

ğŸ§‘â€ğŸ¦¯ Staff Mobile â€” Job Detail (Most Important)

Under the main job info:

SUGGESTED WALK ROUTE
	â€¢	â€œGenerate Routeâ€ button
	â€¢	â€œStart Navigationâ€ button (opens Apple/Google Maps with full route)
	â€¢	Static map preview
	â€¢	Distance + duration

Staff are the primary consumers of walking routes â€” this UX must be clear and frictionless.

â¸»

ğŸ‘¤ Client Portal (Phase 2, Read-Only)

Under service + dogs:

PLANNED WALK
	â€¢	Static map
	â€¢	Distance
	â€¢	â€œRoute planned by your walkerâ€

â¸»

ğŸ‘£ SECTION 3 â€” STAFF UX DIRECTIVE (NEW)

This must be clean, simple, and field-friendly.

â¸»

1. Staff Job Detail Screen (Mobile) â€” Required UX

Add new route block:

Suggested Walking Route
[ Generate Route ]
[ Start Navigation ]
(Map preview)
Distance: X km â€¢ Duration: Y min

Behavioral Requirements:
	â€¢	If no route exists â†’ show only â€œGenerate Routeâ€
	â€¢	After generation â†’ map + distance appear
	â€¢	â€œStart Navigationâ€ opens external maps app with encoded polyline or waypoint URL
	â€¢	Must be fast and accessible offline (map tile cached)

â¸»

2. Staff Calendar Integration
	â€¢	If booking has a route â†’ small route icon appears next to service name
	â€¢	Tapping icon jumps to route section in job detail
	â€¢	This gives staff a quick glance of â€œroute-ready jobsâ€

â¸»

3. Staff Day Overview

(Not code â€” just flow guidance.)
	â€¢	Show a banner at top:
â€œ3 walks today have planned routesâ€
	â€¢	Tapping banner filters job list to â€œroute-readyâ€ jobs

â¸»

4. Route Guarantee Expectations

If route fails to generate:
	â€¢	Show friendly message
â€œRoute could not be generated â€” please navigate manually.â€
	â€¢	Offer â€œOpen Address in Mapsâ€ fallback

â¸»

ğŸ§© SECTION 4 â€” SYSTEM BEHAVIOR EXPECTATIONS

Route Generation Triggers
	â€¢	Admin clicks â€œGenerate Routeâ€
	â€¢	Staff clicks â€œGenerate Routeâ€
	â€¢	Auto-regenerate if:
	â€¢	service duration changes
	â€¢	client address changes

Routing Rules
	â€¢	Use clientâ€™s lat/lng as start/end
	â€¢	Circular loop routes
	â€¢	Target distance:
	â€¢	30 min â†’ 2â€“3 km
	â€¢	60 min â†’ 4â€“6 km
	â€¢	90 min â†’ 6â€“9 km

Persistence
	â€¢	Saving the booking MUST store the route
	â€¢	Editing the booking only regenerates if asked
