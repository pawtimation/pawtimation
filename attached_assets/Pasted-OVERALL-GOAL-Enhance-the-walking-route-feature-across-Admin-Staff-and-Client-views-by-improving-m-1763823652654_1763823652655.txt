OVERALL GOAL

Enhance the walking-route feature across Admin, Staff, and Client views by improving map tiles, routing, markers, and the overall UX ‚Äî without breaking any existing features.

This is UX + behaviour only, not a rewrite.

Do NOT modify:
	‚Ä¢	Booking logic
	‚Ä¢	Address geocoding logic already in use
	‚Ä¢	Calendar or job flows
Everything must be additive and backwards compatible.

‚∏ª

‚úÖ A. MAP PROVIDERS & ACCOUNTS

Use the following:

Primary Map Provider: MapTiler
	‚Ä¢	Reason:
	‚Ä¢	Fully free tier
	‚Ä¢	Gorgeous modern tiles
	‚Ä¢	Works with your current leaflet setup
	‚Ä¢	No credit card needed
	‚Ä¢	Big upgrade visually

Instruction:
Integrate MapTiler tiles as the primary tile layer.
Use your free API key from https://cloud.maptiler.com

Routing Provider: OpenRouteService
	‚Ä¢	Reason:
	‚Ä¢	Free walking-routing
	‚Ä¢	Snap-to-path
	‚Ä¢	Supports multiple waypoints
	‚Ä¢	Clean API
	‚Ä¢	No credit card needed

Instruction:
Use OpenRouteService ONLY for route generation.
Do NOT replace your address geocoding.

Optional Upgrade: Mapbox (not required now)

Mapbox requires billing, so do not use it.

‚∏ª

üü¶ B. CORE UX IMPROVEMENTS

Implement the following behaviours (no code, just the behaviours):

1. Multi-Stop Route Builder

Allow staff/admin to:
	‚Ä¢	Tap ‚ÄúAdd waypoint‚Äù
	‚Ä¢	Click on map to drop another point
	‚Ä¢	Auto-generate walking route between all points
	‚Ä¢	Route updates live as points move

Conditions:
	‚Ä¢	Waypoints draggable
	‚Ä¢	Routes reflow automatically
	‚Ä¢	Do NOT allow freehand drawing yet

2. Snap-to-Path Routing

When generating any route:
	‚Ä¢	Use walking mode
	‚Ä¢	Snap route to footpaths and pavements
	‚Ä¢	Avoid roads where possible
	‚Ä¢	Round corners smoothly rather than jagged polyline segments

3. Improved Marker Icons

Replace default markers with:
	‚Ä¢	Branded paw icon for each waypoint
	‚Ä¢	House icon for client address
	‚Ä¢	Walker icon for staff location (optional future enhancement)

All markers must scale nicely on mobile.

4. Mobile-First Controls

On mobile:
	‚Ä¢	Route builder collapses into a bottom sheet:
	‚Ä¢	‚ÄúAdd waypoint‚Äù
	‚Ä¢	‚ÄúUndo‚Äù
	‚Ä¢	‚ÄúClear‚Äù
	‚Ä¢	‚ÄúRe-centre map‚Äù
	‚Ä¢	Buttons must be thumb-friendly

On desktop:
	‚Ä¢	Show floating panel on left.

5. Re-Centre Button (Important)

Add a floating button:
‚ÄúRe-centre on full route‚Äù
	‚Ä¢	Zooms & pans to fit all waypoints
	‚Ä¢	Ensures mobile users don‚Äôt get lost

6. Live Location (Optional, but add placeholder)

Do NOT implement full GPS tracking yet.
Just add a placeholder button:
‚ÄúEnable live location (coming soon)‚Äù

‚∏ª

üü¶ C. BOOKING FLOW INTEGRATION

Integrate into existing booking detail pages for:

Staff view
	‚Ä¢	Show ‚ÄúStart Walk Route‚Äù button
	‚Ä¢	Map loads with:
	‚Ä¢	Client home
	‚Ä¢	Any pre-added waypoints
	‚Ä¢	Default route from home ‚Üí waypoint(s) ‚Üí home

Admin view
	‚Ä¢	Editable route builder
	‚Ä¢	Ability to save default route per client (optional)

Client view
	‚Ä¢	Read-only map
	‚Ä¢	Displays intended walking route
	‚Ä¢	No editing
	‚Ä¢	No waypoint dragging

‚∏ª

üü¶ D. STYLE & BRANDING

The map MUST visually match your branding:

Colours:
	‚Ä¢	Route line: #2BA39B (primary teal)
	‚Ä¢	Secondary/hover: darkened version
	‚Ä¢	Waypoint circles: white outline, teal fill
	‚Ä¢	Selected waypoint: slightly larger + shadow
	‚Ä¢	UI button colours follow your button palette

Requirements:
	‚Ä¢	No stretched icons
	‚Ä¢	No default blue Leaflet icons
	‚Ä¢	All markers scaled proportionally
	‚Ä¢	Mobile bottom drawer matches your global UI style

‚∏ª

üü¶ E. PERFORMANCE REQUIREMENTS
	1.	Batch route updates ‚Äî do NOT call routing API on every drag.
Trigger only on:

	‚Ä¢	Drag end
	‚Ä¢	Add waypoint
	‚Ä¢	Remove waypoint

	2.	Cache tile images in browser
	3.	Cache last route per booking
	4.	Never block UI while routing
Show a small loading shimmer on route, not global loader

‚∏ª

üü¶ F. SAFETY & NON-NEGOTIABLES
	‚Ä¢	Do NOT break existing job pages
	‚Ä¢	Do NOT change existing coordinates logic
	‚Ä¢	Fail gracefully if API rate limit hits
	‚Ä¢	Use placeholders instead of errors
	‚Ä¢	Never let map crash the booking view

‚∏ª

üü¶ G. ACCEPTANCE CRITERIA

This is how we know it‚Äôs done:
	1.	Routes snap to paths and look smooth
	2.	Waypoints can be added, dragged, removed
	3.	Mobile users can build a route with one thumb
	4.	Admin & staff see editable routes
	5.	Clients see read-only routes
	6.	UI is branded and clean
	7.	No errors in console
	8.	No layout breakage on mobile or desktop
